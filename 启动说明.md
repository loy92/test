# PBR材质识别系统 - 启动说明

## 🚀 快速启动

### 方法一：使用启动脚本（推荐）
```bash
./start_pbr_system.sh
```

### 方法二：手动启动
1. 启动API服务器：
   ```bash
   python3 api/enhanced_app.py
   ```

2. 打开网页界面：
   ```bash
   open web/enhanced_index.html
   ```

## 📋 系统要求

- Python 3.x
- 必要的Python包：
  - flask
  - flask-cors  
  - pillow
  - numpy

## 🌟 功能特性

### ✨ 增强版API (端口5001)
- 🎯 支持10种材料分类识别
- 🔍 智能材料检测（从文件名）
- 📊 高精度PBR参数预测
- 🚀 批量图片处理

### 🖥️ 网页界面功能
- 📁 批量图片上传
- 🔄 实时分析进度
- 📊 结果导出（CSV格式）
- 🎨 现代化UI设计

## 🎯 支持的材料类型

1. **木材** - 金属度低，粗糙度高
2. **金属** - 金属度高，粗糙度低  
3. **塑料** - 可变参数范围
4. **乙烯基** - 中等参数值
5. **纸张** - 粗糙度很高
6. **硅胶** - 半透明特性
7. **橡胶** - 高粗糙度，暗色
8. **皮革** - 自然材质特征
9. **石材** - 中等金属度和粗糙度
10. **丝网印刷** - 特殊表面处理

## 📱 使用步骤

1. **启动系统**
   - 运行启动脚本或手动启动

2. **上传图片**
   - 点击上传区域选择图片
   - 支持JPG、PNG、WebP格式
   - 可同时选择多张图片

3. **开始分析**
   - 点击"开始批量分析"按钮
   - 系统会自动识别材料类型
   - 实时显示分析进度

4. **查看结果**
   - 金属度、粗糙度、透明度参数
   - 置信度评估
   - 检测到的材料类型

5. **导出数据**
   - 点击"导出结果"生成CSV文件
   - 包含所有分析数据和时间戳

## 🔧 API接口

### 主要端点
- `GET /` - API信息
- `GET /api/health` - 健康检查
- `POST /api/analyze/enhanced` - 增强分析
- `GET /api/materials/all` - 获取所有材料
- `GET /api/system/info` - 系统信息

### 分析接口示例
```bash
curl -X POST http://localhost:5001/api/analyze/enhanced \
  -H "Content-Type: application/json" \
  -d '{
    "image": "base64_image_data",
    "filename": "metal_sample.jpg"
  }'
```

## 🛠️ 故障排除

### 常见问题

1. **端口被占用**
   ```bash
   lsof -ti:5001
   kill <PID>
   ```

2. **Python包缺失**
   ```bash
   pip3 install flask flask-cors pillow numpy
   ```

3. **权限问题**
   ```bash
   chmod +x start_pbr_system.sh
   ```

### 调试模式
- 查看API日志获取详细信息
- 使用浏览器开发者工具检查网络请求
- 检查控制台输出

## 📞 技术支持

如遇到问题，请检查：
1. Python3是否正确安装
2. 依赖包是否完整
3. 端口5001是否可用
4. 浏览器是否支持现代JavaScript

---
*PBR材质识别系统 v2.0 - 增强版*