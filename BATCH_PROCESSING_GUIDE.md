# 🚀 PBR批量处理功能指南

## ✅ 系统更新完成

根据您的要求，已对系统进行以下重要更新：

### 🎯 功能更改
1. **去除凹凸强度参数** - 简化PBR参数为金属度、粗糙度、透明度三项核心参数
2. **自动参数显示** - 识别完成后PBR参数自动显示，无需额外操作
3. **批量处理能力** - 新增批量上传和分析多张图片的功能

## 🖼️ 单张图片模式

### 使用步骤
1. **选择模式** - 确保选择了"🖼️ 单张图片"模式
2. **上传图片** - 点击或拖拽上传单张图片
3. **开始分析** - 点击"🔍 开始分析材质"按钮
4. **查看结果** - 分析完成后自动显示PBR参数

### 显示内容
```
⚙️ PBR材质参数
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ PBR参数已识别                    [时间戳]

金属度 (Metallic):    20.0% [████░░░░░░░░░░░░░░░░]
粗糙度 (Roughness):   50.0% [██████████░░░░░░░░░░]  
透明度 (Transparency): 30.0% [██████░░░░░░░░░░░░░░]

🎨 预测材质类型: 塑料材质
置信度: 15.7%
```

## 📚 批量处理模式

### 使用步骤
1. **切换模式** - 点击"📚 批量处理"按钮
2. **选择图片** - 点击上传区域选择多张图片（支持Ctrl/Cmd+多选）
3. **预览确认** - 查看已选择的图片网格预览
4. **批量分析** - 点击"🔍 批量分析 X 张图片"开始处理
5. **查看结果** - 分析完成后自动显示所有图片的PBR参数

### 批量结果显示
```
⚙️ PBR批量分析结果
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 已完成 3 张图片分析              [时间戳]

┌─ image1.jpg ────────────────────────────────┐
│ [缩略图] 置信度: 85.6%                      │
│ 金属度: 75.0%  粗糙度: 25.0%  透明度: 10.0% │
└─────────────────────────────────────────────┘

┌─ image2.jpg ────────────────────────────────┐
│ [缩略图] 置信度: 72.3%                      │
│ 金属度: 20.0%  粗糙度: 80.0%  透明度: 5.0%  │
└─────────────────────────────────────────────┘

┌─ image3.jpg ────────────────────────────────┐
│ [缩略图] 置信度: 91.2%                      │
│ 金属度: 95.0%  粗糙度: 15.0%  透明度: 0.0%  │
└─────────────────────────────────────────────┘
```

## 🔧 批量功能特性

### 📊 实时进度显示
- **进度指示器** - 显示"批量分析中... (2/5)"
- **状态更新** - 实时显示当前处理的图片
- **完成统计** - 显示成功分析的图片数量

### 🛠️ 操作功能
- **🗑️ 清空选择** - 清除所有已选择的图片
- **📄 导出结果** - 将批量分析结果导出为JSON文件
- **模式切换** - 可随时在单张和批量模式间切换

### 📁 支持格式
- **图片格式** - JPG, PNG, WebP
- **文件数量** - 理论上无限制（建议每次处理不超过50张）
- **文件大小** - 建议单张图片不超过10MB

## 🚀 性能优化

### 处理策略
- **顺序处理** - 避免并发请求造成API过载
- **智能延迟** - 请求间增加200ms间隔
- **错误处理** - 单张失败不影响整体进度
- **内存管理** - 及时释放处理完成的图片数据

### 导出格式
```json
{
  "timestamp": "2024-01-15T14:30:00.000Z",
  "totalImages": 3,
  "results": [
    {
      "fileName": "image1.jpg",
      "metallic": 0.75,
      "roughness": 0.25,
      "transparency": 0.1,
      "confidence": 0.856,
      "base_color": [255, 215, 0],
      "timestamp": "2024-01-15T14:30:15.123Z"
    }
  ]
}
```

## 🎯 使用建议

### 单张模式适用场景
- ✅ 精细材质分析
- ✅ 实时交互调整
- ✅ 测试和实验
- ✅ 高质量单张图片处理

### 批量模式适用场景
- ✅ 大量材质样本分析
- ✅ 材质库建设
- ✅ 批量数据收集
- ✅ 自动化工作流程

### 性能提示
- 建议单次批量处理不超过20张图片
- 确保网络连接稳定
- 处理期间不要关闭浏览器标签页
- 大文件处理前建议先测试小批量

## 🛠️ 故障排除

### 常见问题
1. **批量处理中断** - 刷新页面重新开始
2. **某张图片失败** - 系统会自动跳过并继续
3. **导出失败** - 检查浏览器下载权限
4. **界面卡顿** - 减少单次处理的图片数量

### 技术支持
- 查看浏览器控制台获取详细错误信息
- 使用单张模式测试API连接
- 检查图片格式和大小是否符合要求

---

**🎉 批量处理功能已完全集成，开始体验高效的PBR材质分析吧！** 