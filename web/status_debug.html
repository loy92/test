<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çŠ¶æ€è¯Šæ–­é¡µé¢</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 30px; border-radius: 12px; }
        .status-item { margin: 10px 0; padding: 10px; border-radius: 6px; }
        .true { background: #ffebee; border-left: 4px solid #f44336; }
        .false { background: #e8f5e8; border-left: 4px solid #4caf50; }
        .debug-section { margin: 20px 0; padding: 15px; background: #f8f9fa; border-radius: 8px; }
    </style>
</head>
<body>
    <div class="container" id="app">
        <h1>ğŸ” VueçŠ¶æ€è¯Šæ–­</h1>
        
        <div class="debug-section">
            <h3>ğŸ“Š å½“å‰çŠ¶æ€</h3>
            <div :class="['status-item', isAnalyzing ? 'true' : 'false']">
                <strong>isAnalyzing:</strong> {{ isAnalyzing }}
                {{ isAnalyzing ? 'âš ï¸ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæ˜¾ç¤º"åˆ†æä¸­"' : 'âœ… æ­£å¸¸' }}
            </div>
            
            <div :class="['status-item', isBatchAnalyzing ? 'true' : 'false']">
                <strong>isBatchAnalyzing:</strong> {{ isBatchAnalyzing }}
                {{ isBatchAnalyzing ? 'âš ï¸ æ‰¹é‡åˆ†æçŠ¶æ€å¼‚å¸¸' : 'âœ… æ­£å¸¸' }}
            </div>
            
            <div :class="['status-item', selectedImage ? 'true' : 'false']">
                <strong>selectedImage:</strong> {{ selectedImage ? 'æœ‰å›¾ç‰‡' : 'æ— å›¾ç‰‡' }}
            </div>
            
            <div :class="['status-item', isBatchMode ? 'true' : 'false']">
                <strong>isBatchMode:</strong> {{ isBatchMode }}
            </div>
            
            <div :class="['status-item', pbrResults ? 'true' : 'false']">
                <strong>pbrResults:</strong> {{ pbrResults ? 'æœ‰æ•°æ®' : 'æ— æ•°æ®' }}
            </div>
        </div>
        
        <div class="debug-section">
            <h3>ğŸ”§ é—®é¢˜è¯Šæ–­</h3>
            <div v-if="isAnalyzing || isBatchAnalyzing">
                <p style="color: #f44336; font-weight: bold;">
                    âŒ å‘ç°é—®é¢˜ï¼šåˆ†æçŠ¶æ€å¼‚å¸¸ä¸ºtrueï¼
                </p>
                <button @click="resetAnalyzingState" style="padding: 10px 20px; background: #f44336; color: white; border: none; border-radius: 6px; cursor: pointer;">
                    ğŸ”„ é‡ç½®åˆ†æçŠ¶æ€
                </button>
            </div>
            <div v-else>
                <p style="color: #4caf50; font-weight: bold;">
                    âœ… åˆ†æçŠ¶æ€æ­£å¸¸
                </p>
            </div>
        </div>
        
        <div class="debug-section">
            <h3>ğŸ§ª æµ‹è¯•æ“ä½œ</h3>
            <button @click="loadTestData" style="padding: 10px 20px; background: #1890ff; color: white; border: none; border-radius: 6px; cursor: pointer; margin-right: 10px;">
                ğŸ“Š åŠ è½½æµ‹è¯•æ•°æ®
            </button>
            
            <button @click="clearAllData" style="padding: 10px 20px; background: #ff9800; color: white; border: none; border-radius: 6px; cursor: pointer;">
                ğŸ—‘ï¸ æ¸…é™¤æ‰€æœ‰æ•°æ®
            </button>
        </div>
        
        <div class="debug-section">
            <h3>ğŸ“ å®Œæ•´çŠ¶æ€JSON</h3>
            <pre style="background: #f1f1f1; padding: 15px; border-radius: 6px; overflow-x: auto; font-size: 12px;">{{ JSON.stringify({
                isAnalyzing,
                isBatchAnalyzing,
                selectedImage: selectedImage ? 'exists' : null,
                isBatchMode,
                pbrResults: pbrResults ? 'exists' : null,
                selectedImages: selectedImages.length,
                batchProgress,
                batchResults: batchResults.length
            }, null, 2) }}</pre>
        </div>
        
        <div style="margin-top: 20px; text-align: center;">
            <a href="/" style="color: #1890ff; text-decoration: none;">â† è¿”å›ä¸»ç•Œé¢</a>
        </div>
    </div>

    <!-- å¼•å…¥ Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <script>
        const { createApp } = Vue;
        
        createApp({
            data() {
                return {
                    // å•å¼ å›¾ç‰‡æ¨¡å¼
                    selectedImage: null,
                    isDragging: false,
                    isAnalyzing: false,
                    pbrResults: null,
                    
                    // æ‰¹é‡å¤„ç†æ¨¡å¼
                    isBatchMode: false,
                    selectedImages: [],
                    isBatchAnalyzing: false,
                    batchProgress: 0,
                    batchResults: []
                };
            },
            
            methods: {
                resetAnalyzingState() {
                    this.isAnalyzing = false;
                    this.isBatchAnalyzing = false;
                    console.log('âœ… åˆ†æçŠ¶æ€å·²é‡ç½®');
                },
                
                loadTestData() {
                    const testData = {
                        metallic: 0.75,
                        roughness: 0.25,
                        transparency: 0.1,
                        confidence: 0.85,
                        base_color: [255, 215, 0],
                        timestamp: new Date().toISOString(),
                        material_type: 'æŠ›å…‰é‡‘å±'
                    };
                    
                    this.pbrResults = testData;
                    console.log('âœ… æµ‹è¯•æ•°æ®å·²åŠ è½½:', this.pbrResults);
                },
                
                clearAllData() {
                    this.selectedImage = null;
                    this.pbrResults = null;
                    this.selectedImages = [];
                    this.batchResults = [];
                    this.isAnalyzing = false;
                    this.isBatchAnalyzing = false;
                    this.batchProgress = 0;
                    console.log('âœ… æ‰€æœ‰æ•°æ®å·²æ¸…é™¤');
                }
            },
            
            mounted() {
                console.log('ğŸš€ è¯Šæ–­é¡µé¢å·²æŒ‚è½½');
                
                // è‡ªåŠ¨åŠ è½½æµ‹è¯•æ•°æ®
                setTimeout(() => {
                    this.loadTestData();
                }, 500);
            }
        }).mount('#app');
    </script>
</body>
</html> 